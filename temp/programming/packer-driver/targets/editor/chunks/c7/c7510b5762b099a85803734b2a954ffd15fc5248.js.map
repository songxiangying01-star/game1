{"version":3,"sources":["file:///Users/songxiangying/Desktop/cc1234223/assets/core/prop-anims/VwExchange.ts"],"names":["_decorator","Component","Node","Prefab","VwFunland","ccclass","menu","property","VwExchange","show","candidates","funlandView","glasses","filter","glass","isAd","isEmpty","isSealed","isAllHide","length","randomIndex","Math","floor","random","selectedGlass","handleRandExchangeColors","hide","contentNode","removeAllChildren","node","active"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AASQA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAC5BC,MAAAA,S,iBAAAA,S;;;;;;AAVT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAIM;AAACC,QAAAA,OAAD;AAAUC,QAAAA,IAAV;AAAgBC,QAAAA;AAAhB,O,GAA4BP,U;;4BAIrBQ,U,WAFZH,OAAO,CAAC,YAAD,C,UACPC,IAAI,CAAC,gBAAD,C,UAGAC,QAAQ,CAACL,IAAD,C,UAGRK,QAAQ,CAACJ,MAAD,C,UAGRI,QAAQ;AAAA;AAAA,iC,0CAVb,MAEaC,UAFb,SAEgCP,SAFhC,CAE0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAW/BQ,QAAAA,IAAI,GAAG;AACV;AACA;AACA,gBAAMC,UAAU,GAAG,KAAKC,WAAL,CAAiBC,OAAjB,CAAyBC,MAAzB,CAAgCC,KAAK,IACpD,CAACA,KAAK,CAACC,IAAN,EAAD,IACA,CAACD,KAAK,CAACE,OADP,IAEA,CAACF,KAAK,CAACG,QAAN,EAFD,IAGA,CAACH,KAAK,CAACI,SAAN,EAJc,CAAnB;;AAOA,cAAIR,UAAU,CAACS,MAAX,GAAoB,CAAxB,EAA2B;AACvB;AACA,kBAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBb,UAAU,CAACS,MAAtC,CAApB;AACA,kBAAMK,aAAa,GAAGd,UAAU,CAACU,WAAD,CAAhC,CAHuB,CAKvB;;AACA,iBAAKT,WAAL,CAAiBc,wBAAjB,CAA0CD,aAA1C;AACH,WAjBS,CAmBV;;;AACA,eAAKE,IAAL;AACH;;AAEMA,QAAAA,IAAI,GAAG;AACV,eAAKC,WAAL,CAAiBC,iBAAjB;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;;AArCqC,O","sourcesContent":["/**\n * @Descripttion:\n * 使用交换道具：点击后不显示特效，直接随机选择一个有效瓶子进行水层交换\n * @version: 1.1\n * @Author: Lioesquieu\n * @Date: 2025-08-07\n * @LastEditors: Lioesquieu\n * @LastEditTime: 2025-08-07\n */\nimport {_decorator, Component, Node, Prefab} from 'cc';\nimport { VwFunland } from '../VwFunland';\n\nconst {ccclass, menu, property} = _decorator;\n\n@ccclass('VwExchange')\n@menu('cwg/VwExchange')\nexport class VwExchange extends Component {\n\n    @property(Node)\n    protected contentNode: Node;\n\n    @property(Prefab)\n    protected dmNode: Prefab;\n\n    @property(VwFunland)\n    protected funlandView: VwFunland;\n\n    public show() {\n        // 筛选出所有可以进行交换的瓶子\n        // 条件：不是广告瓶、不是空瓶、没有密封（没满且同色）、没有隐藏层\n        const candidates = this.funlandView.glasses.filter(glass => \n            !glass.isAd() && \n            !glass.isEmpty && \n            !glass.isSealed() && \n            !glass.isAllHide()\n        );\n\n        if (candidates.length > 0) {\n            // 从符合条件的瓶子中随机选择一个\n            const randomIndex = Math.floor(Math.random() * candidates.length);\n            const selectedGlass = candidates[randomIndex];\n            \n            // 直接执行交换逻辑，不显示任何特效\n            this.funlandView.handleRandExchangeColors(selectedGlass);\n        }\n\n        // 隐藏自身（确保没有残留UI）\n        this.hide();\n    }\n\n    public hide() {\n        this.contentNode.removeAllChildren();\n        this.node.active = false;\n    }\n}"]}