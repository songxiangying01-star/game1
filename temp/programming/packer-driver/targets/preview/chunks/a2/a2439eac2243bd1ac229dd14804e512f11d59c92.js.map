{"version":3,"sources":["file:///Users/songxiangying/Library/Containers/com.tencent.xinWeChat/Data/Documents/xwechat_files/wxid_4kr9sthln3gq22_cb54/msg/file/2025-11/cc123/assets/editor/VwEdGlassSetting.ts"],"names":["_decorator","Component","ToggleContainer","ccclass","menu","property","VwEdGlassSetting","init","glass","currentGlass","info","ad","modeToggleContainer","toggleItems","isChecked","colorCountToggleContainer","forEach","item","index","colorCnt","hideCountToggleContainer","hideCnt","choseClose","node","active","updatedInfo","onClose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAcQA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,e,OAAAA,e;;;;;;AAd/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAKM;AAACC,QAAAA,OAAD;AAAUC,QAAAA,IAAV;AAAgBC,QAAAA;AAAhB,O,GAA4BL,U;;yBAIbM,gB,WAFpBH,OAAO,CAAC,kBAAD,C,UACPC,IAAI,CAAC,sBAAD,C,UAIAC,QAAQ,CAACH,eAAD,C,UAIRG,QAAQ,CAACH,eAAD,C,UAIRG,QAAQ,CAACH,eAAD,C,0CAbb,MAEqBI,gBAFrB,SAE8CL,SAF9C,CAEwD;AAAA;AAAA;;AAEpD;AAFoD;;AAMpD;AANoD;;AAUpD;AAVoD;AAAA;;AAcpD;;AAGA;;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIM,QAAAA,IAAI,CAACC,KAAD,EAAiB;AACjB,eAAKC,YAAL,GAAoBD,KAApB;;AACA,cAAI,KAAKC,YAAL,CAAkBC,IAAlB,CAAuBC,EAA3B,EAA+B;AAC3B;AACA,iBAAKC,mBAAL,CAAyBC,WAAzB,CAAqC,CAArC,EAAwCC,SAAxC,GAAoD,IAApD;AACH,WAHD,MAGO;AACH;AACA,iBAAKF,mBAAL,CAAyBC,WAAzB,CAAqC,CAArC,EAAwCC,SAAxC,GAAoD,IAApD,CAFG,CAGH;;AACA,iBAAKC,yBAAL,CAA+BF,WAA/B,CAA2CG,OAA3C,CAAmD,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAChED,cAAAA,IAAI,CAACH,SAAL,GAAiBI,KAAK,IAAI,KAAKT,YAAL,CAAkBC,IAAlB,CAAuBS,QAAjD;AACH,aAFD,EAJG,CAOH;;AACA,iBAAKC,wBAAL,CAA8BP,WAA9B,CAA0CG,OAA1C,CAAkD,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC/DD,cAAAA,IAAI,CAACH,SAAL,GAAiBI,KAAK,IAAI,KAAKT,YAAL,CAAkBC,IAAlB,CAAuBW,OAAjD;AACH,aAFD;AAGH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACcC,QAAAA,UAAU,GAAG;AACnB;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AAEA,cAAMC,WAAwB,GAAG,KAAKhB,YAAL,CAAkBC,IAAnD;;AAEA,cAAI,KAAKE,mBAAL,CAAyBC,WAAzB,CAAqC,CAArC,EAAwCC,SAA5C,EAAuD;AACnD;AAEA;AACA,iBAAKC,yBAAL,CAA+BF,WAA/B,CAA2CG,OAA3C,CAAmD,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAChE,kBAAID,IAAI,CAACH,SAAT,EAAoB;AAChBW,gBAAAA,WAAW,CAACN,QAAZ,GAAuBD,KAAvB;AACH;AACJ,aAJD,EAJmD,CAUnD;;AACA,iBAAKE,wBAAL,CAA8BP,WAA9B,CAA0CG,OAA1C,CAAkD,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC/D,kBAAID,IAAI,CAACH,SAAT,EAAoB;AAChBW,gBAAAA,WAAW,CAACJ,OAAZ,GAAsBH,KAAtB;AACH;AACJ,aAJD;AAKH,WAhBD,MAgBO;AACH;AACAO,YAAAA,WAAW,CAACd,EAAZ,GAAiB,IAAjB;AACH,WAzBkB,CA0BnB;;;AACA,eAAKe,OAAL,IAAgB,KAAKA,OAAL,CAAaD,WAAb,CAAhB;AACH;;AApFmD,O","sourcesContent":["/**\n * @Descripttion: 玻璃杯设置界面组件 - 用于编辑单个玻璃杯的颜色数量和隐藏数量\n * @version: 1.0\n * @Author: Lioesquieu\n * @Date: 2025-07-20\n * @LastEditors: Lioesquieu\n * @LastEditTime: 2025-07-20\n * \n * 该组件提供以下功能：\n * 1. 设置玻璃杯中的颜色数量（0-4种颜色）\n * 2. 设置玻璃杯的隐藏数量（0-4层隐藏）\n * 3. 切换为广告模式（特殊状态）\n * 4. 保存设置并关闭界面\n */\nimport {_decorator, Component, ToggleContainer} from 'cc';\nimport {EdGlassInfo} from './EdFunlandInfo';\nimport EdGlass from './EdGlass';\n\nconst {ccclass, menu, property} = _decorator;\n\n@ccclass('VwEdGlassSetting')\n@menu('cwg/VwEdGlassSetting')\nexport default class VwEdGlassSetting extends Component {\n\n    /** 模式选择开关容器 - 用于切换普通模式和广告模式 */\n    @property(ToggleContainer)\n    protected modeToggleContainer: ToggleContainer;\n\n    /** 颜色数量选择开关容器 - 用于选择玻璃杯中的颜色数量（0-4） */\n    @property(ToggleContainer)\n    protected colorCountToggleContainer: ToggleContainer;\n\n    /** 隐藏数量选择开关容器 - 用于选择玻璃杯的隐藏层数（0-4） */\n    @property(ToggleContainer)\n    protected hideCountToggleContainer: ToggleContainer;\n\n    /** 关闭回调函数 - 当设置完成并关闭界面时调用，传递更新后的关卡信息 */\n    public onClose: (updatedStageInfo: EdGlassInfo) => void;\n\n    /** 当前正在编辑的玻璃杯实例 */\n    protected currentGlass: EdGlass;\n\n    /**\n     * 初始化设置界面\n     * @param glass - 需要编辑的玻璃杯实例\n     * \n     * 根据玻璃杯的当前状态初始化界面控件：\n     * - 如果是广告模式，选中第二个开关\n     * - 如果是普通模式，选中第一个开关，并设置对应的颜色数量和隐藏数量\n     */\n    init(glass: EdGlass) {\n        this.currentGlass = glass;\n        if (this.currentGlass.info.ad) {\n            // 广告模式 - 选中第二个开关（索引1）\n            this.modeToggleContainer.toggleItems[1].isChecked = true;\n        } else {\n            // 普通模式 - 选中第一个开关（索引0）\n            this.modeToggleContainer.toggleItems[0].isChecked = true;\n            // 根据当前颜色数量设置对应的开关状态\n            this.colorCountToggleContainer.toggleItems.forEach((item, index) => {\n                item.isChecked = index <= this.currentGlass.info.colorCnt;\n            })\n            // 根据当前隐藏数量设置对应的开关状态\n            this.hideCountToggleContainer.toggleItems.forEach((item, index) => {\n                item.isChecked = index <= this.currentGlass.info.hideCnt;\n            })\n        }\n    }\n\n    /**\n     * 关闭设置界面并保存设置\n     * \n     * 处理逻辑：\n     * 1. 隐藏设置界面\n     * 2. 获取当前选中的设置值\n     * 3. 更新玻璃杯的关卡信息\n     * 4. 触发关闭回调函数\n     */\n    protected choseClose() {\n        // 隐藏设置界面\n        this.node.active = false;\n\n        const updatedInfo: EdGlassInfo = this.currentGlass.info;\n\n        if (this.modeToggleContainer.toggleItems[0].isChecked) {\n            // 普通模式 - 获取用户选择的颜色数量和隐藏数量\n            \n            // 获取选中的颜色数量（最后一个选中的开关索引）\n            this.colorCountToggleContainer.toggleItems.forEach((item, index) => {\n                if (item.isChecked) {\n                    updatedInfo.colorCnt = index;\n                }\n            })\n\n            // 获取选中的隐藏数量（最后一个选中的开关索引）\n            this.hideCountToggleContainer.toggleItems.forEach((item, index) => {\n                if (item.isChecked) {\n                    updatedInfo.hideCnt = index;\n                }\n            })\n        } else {\n            // 广告模式 - 设置为广告状态\n            updatedInfo.ad = true;\n        }\n        // 触发关闭回调，传递更新后的关卡信息\n        this.onClose && this.onClose(updatedInfo);\n    }\n\n}"]}