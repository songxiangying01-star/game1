{"version":3,"sources":["file:///Users/songxiangying/Desktop/cc1234223/assets/common/Pool.ts"],"names":["Pool","instantiate","NodePool","constructor","_prefab","pool","create","prefab","count","init","destroy","clear","i","node","put","get","active","parent"],"mappings":";;;yFAUqBA,I;;;;;;;;;AAFbC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,Q,OAAAA,Q;;;;;;AAR3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;yBAGqBF,I,GAAN,MAAMA,IAAN,CAAW;AAKtBG,QAAAA,WAAW,GAAG;AAAA,eAFJC,OAEI,GAFqB,IAErB;AACV,eAAKC,IAAL,GAAY,IAAIH,QAAJ,EAAZ;AACH;;AAEmB,eAANI,MAAM,CAACC,MAAD,EAAwBC,KAAxB,EAA2C;AAAA,cAAnBA,KAAmB;AAAnBA,YAAAA,KAAmB,GAAH,CAAG;AAAA;;AAC3D,cAAMH,IAAI,GAAG,IAAIL,IAAJ,EAAb;AACAK,UAAAA,IAAI,CAACI,IAAL,CAAUF,MAAV,EAAkBC,KAAlB;AACA,iBAAOH,IAAP;AACH;;AAEMK,QAAAA,OAAO,GAAG;AACb,eAAKC,KAAL;AACA,eAAKP,OAAL,GAAe,IAAf;AACH;;AAEMK,QAAAA,IAAI,CAACF,MAAD,EAAwBC,KAAxB,EAA2C;AAAA,cAAnBA,KAAmB;AAAnBA,YAAAA,KAAmB,GAAH,CAAG;AAAA;;AAClD,eAAKJ,OAAL,GAAeG,MAAf;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAApB,EAA2BI,CAAC,EAA5B,EAAgC;AAC5B,gBAAMC,IAAI,GAAGZ,WAAW,CAAC,KAAKG,OAAN,CAAxB;AACA,iBAAKC,IAAL,CAAUS,GAAV,CAAcD,IAAd;AACH;AACJ;;AAEMF,QAAAA,KAAK,GAAG;AACX,eAAKN,IAAL,CAAUM,KAAV;AACH;;AAEMI,QAAAA,GAAG,GAAG;AACT,cAAIF,IAAI,GAAG,KAAKR,IAAL,CAAUU,GAAV,EAAX;;AACA,cAAI,CAACF,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAGZ,WAAW,CAAC,KAAKG,OAAN,CAAlB;AACH;;AACDS,UAAAA,IAAI,CAACG,MAAL,GAAc,IAAd;AACA,iBAAOH,IAAP;AACH;;AAEMC,QAAAA,GAAG,CAACD,IAAD,EAAa;AACnB,cAAI,CAACA,IAAL,EAAW;AACP;AACH;;AACDA,UAAAA,IAAI,CAACG,MAAL,GAAc,KAAd;AACAH,UAAAA,IAAI,CAACI,MAAL,GAAc,IAAd;AACA,eAAKZ,IAAL,CAAUS,GAAV,CAAcD,IAAd;AACH;;AAhDqB,O","sourcesContent":["/**\n * @Descripttion:\n * @version: 1.0\n * @Author:\n * @Date: 2024-06-24\n * @LastEditors: Lioesquieu\n * @LastEditTime: 2024-08-06\n */\nimport {instantiate, Node, NodePool, Prefab} from 'cc';\n\nexport default class Pool {\n\n    protected pool: NodePool;\n    protected _prefab: Prefab | Node = null;\n\n    constructor() {\n        this.pool = new NodePool();\n    }\n\n    public static create(prefab: Prefab | Node, count: number = 0) {\n        const pool = new Pool();\n        pool.init(prefab, count);\n        return pool;\n    }\n\n    public destroy() {\n        this.clear();\n        this._prefab = null;\n    }\n\n    public init(prefab: Prefab | Node, count: number = 0) {\n        this._prefab = prefab;\n        for (let i = 0; i < count; i++) {\n            const node = instantiate(this._prefab) as Node;\n            this.pool.put(node);\n        }\n    }\n\n    public clear() {\n        this.pool.clear();\n    }\n\n    public get() {\n        let node = this.pool.get();\n        if (!node) {\n            node = instantiate(this._prefab) as Node;\n        }\n        node.active = true;\n        return node;\n    }\n\n    public put(node: Node) {\n        if (!node) {\n            return;\n        }\n        node.active = false;\n        node.parent = null;\n        this.pool.put(node);\n    }\n\n}"]}