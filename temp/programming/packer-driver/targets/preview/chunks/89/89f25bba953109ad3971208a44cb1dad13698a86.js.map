{"version":3,"sources":["file:///Users/songxiangying/Desktop/cc1234223/assets/core/EndCtrl.ts"],"names":["_decorator","Component","director","sys","ccclass","property","EndCtrl","onBtnHome","loadScene","onBtnRestart","info","level","time","step","width","height","localData","localStorage","getItem","JSON","parse","setItem","stringify"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,G,OAAAA,G;;;;;;;;;OACpC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;yBAGjBM,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BL,SAD7B,CACuC;AAEnC;AACOM,QAAAA,SAAS,GAAG;AACfL,UAAAA,QAAQ,CAACM,SAAT,CAAmB,MAAnB;AACH,SALkC,CAOnC;;;AACOC,QAAAA,YAAY,GAAG;AAClB;AACA,cAAIC,IAAI,GAAG;AAAEC,YAAAA,KAAK,EAAE,CAAT;AAAYC,YAAAA,IAAI,EAAE,CAAlB;AAAqBC,YAAAA,IAAI,EAAE,CAA3B;AAA8BC,YAAAA,KAAK,EAAE,CAArC;AAAwCC,YAAAA,MAAM,EAAE;AAAhD,WAAX;AACA,cAAMC,SAAS,GAAGb,GAAG,CAACc,YAAJ,CAAiBC,OAAjB,CAAyB,UAAzB,CAAlB;;AACA,cAAIF,SAAJ,EAAe;AACXN,YAAAA,IAAI,GAAGS,IAAI,CAACC,KAAL,CAAWJ,SAAX,CAAP;AACAN,YAAAA,IAAI,CAACC,KAAL,GAAa,CAAb;AACH;;AACDR,UAAAA,GAAG,CAACc,YAAJ,CAAiBI,OAAjB,CAAyB,UAAzB,EAAqCF,IAAI,CAACG,SAAL,CAAeZ,IAAf,CAArC,EARkB,CAUlB;;AACAR,UAAAA,QAAQ,CAACM,SAAT,CAAmB,MAAnB;AACH;;AApBkC,O","sourcesContent":["import { _decorator, Component, director, sys } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('EndCtrl')\nexport class EndCtrl extends Component {\n\n    // “回到首页”按钮\n    public onBtnHome() {\n        director.loadScene(\"Home\");\n    }\n\n    // “重新游戏”按钮 (回到第1关)\n    public onBtnRestart() {\n        // 重置存档为第1关\n        let info = { level: 0, time: 0, step: 0, width: 3, height: 3 };\n        const localData = sys.localStorage.getItem(\"CwgState\");\n        if (localData) {\n            info = JSON.parse(localData);\n            info.level = 0; \n        }\n        sys.localStorage.setItem(\"CwgState\", JSON.stringify(info));\n\n        // 进入游戏\n        director.loadScene(\"game\");\n    }\n}"]}